<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport"
			content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
		<script src="https://cdn.bootcss.com/vConsole/3.3.0/vconsole.min.js"></script>
	</head>
	<body>
		<button onclick="getCurrentPosition()">请求定位</button>
	</body>

	<script>
		var vConsole = new VConsole();
		document.addEventListener("visibilitychange", () => {
			var string = document.visibilityState;
			console.log(string);
		});

		function getCurrentPosition() {
			navigator.geolocation.getCurrentPosition(function(res){
				console.log(res)
			}, function(res){
				console.log(res.message)
			}, {
				// 指示浏览器获取高精度的位置，默认为false
				enableHighAccuracy: true,
				// 指定获取地理位置的超时时间，默认不限时，单位为毫秒
				timeout: 5000,
				// 最长有效期，在重复获取地理位置时，此参数指定多久再次获取位置。
				maximumAge: 3000
			});
		}
	</script>
</html>
